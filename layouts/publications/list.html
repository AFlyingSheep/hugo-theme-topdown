{{ define "main" }}
<div class="topdown-main">
	<div class="publications-column">
		<h1 style="text-align:left; font-size: xx-large;">论文(部分)</h1>
		<!-- <p>排版有待调整</p> -->

		<hr aria-hidden="true">

		{{ $currentYear := now.Year }}
		{{ $startYear := 2010 }}
		{{ $Pages := .Pages }}

		<!-- 2010到今年 -->
		{{ range $year := seq $currentYear -1 $startYear  }}
			{{ $counter := 0 }}
			
			<!-- 每年计数 -->
			{{ range $Pages.ByPublishDate.Reverse }}
				{{ if eq $year .Params.Year }}
					{{ $counter = add $counter 1 }}
				{{ end }}
			{{ end }}

			{{ if gt $counter 0 }}
				<h2>{{ $year }}</h2>
				
				<!-- 打印对应年份的paper -->
				{{ range $Pages.ByPublishDate.Reverse }}
				{{ if eq $year .Params.Year }}
					<div class="paper-bar">
						<div class="paper-card">
							<p class="paper-title">{{ .Params.title }}</p>
							<span class="paper-FirstAuthor">
								{{ range .Params.FirstAuthor }}
									{{ . }},
								{{ end }}
							</span>
							<span class="paper-OtherAuthors">
								{{ range .Params.OtherAuthors }}
									{{ . }},
								{{ end }}
							</span>
							<div class="paper-ConfJournal">
								{{ .Params.ConfJournal }} ({{ .Params.ConfJournalAbbr }} {{ .Params.Year }})
								<b>CCF {{ .Params.CCFLevel }}</b> 
								{{ with .Params.IsAConference }}
									{{ if eq . "no" }}
									<b>Journal</b>
									{{ end }}
								{{ end }}
							</div>
							<div class="paper-multimedia">
								{{ with .Params.Link }}
									<a class="icons" href="{{ . | safeHTML }}">
										<i  data-feather="link"></i>
										<span class="feather-text">DOI</span>
									</a>
								{{ end }}
								{{ with .Params.PDF }}
									<a class="icons" href="{{ . | safeHTML }}">
										<i  data-feather="paperclip"></i>
										<span class="feather-text">PDF</span>
									</a>
								{{ end }}
								{{ with .Params.SLIDE }}
									<a class="icons" href="{{ . | safeHTML }}">
										<i  data-feather="download"></i>
										<span class="feather-text">PPT</span>
									</a>
								{{ end }}
								{{ with .Params.video }}
									<a class="icons" href="{{ . | safeHTML }}">
										<i  data-feather="video"></i>
										<span class="feather-text">Video</span>
									</a>
								{{ end }}
							</div>
						</div>
					</div>
				{{ end }}
				{{ end }}
			{{ end }}
		{{ end }}
	
		{{ range .Pages.ByPublishDate.Reverse }}
			
		{{ end }}
	</div>
</div>
{{ end }}